(this.webpackJsonpkeytrainer=this.webpackJsonpkeytrainer||[]).push([[0],{34:function(t,e,r){"use strict";r.r(e);var o=r(0),a=r.n(o),c=r(7),n=r.n(c),i=r(9),s=r(17),l=r(19),d=r.n(l)()();function u(t,e){var r;return t.headGoodCount<4&&(null===(r=t.targets[t.targets.length-1])||void 0===r?void 0:r.value)!==t.head&&e>.8?t.head:function(t,e){for(var r,o,a=Math.pow(2,-.5),c=(null===(r=t.targets[t.targets.length-1])||void 0===r?void 0:r.index)+1||0,n=function(t){var e=t.errorRatio,r=t.lastCalledIndex;return void 0===r?e:e*(1-Math.pow(a,c-r-1))},s=Object.values(t.charStatsMatrix).reduce((function(t,e){return t+n(e)}),0),l=e*s,d=0,u=Object.entries(t.charStatsMatrix);d<u.length;d++){var h=Object(i.a)(u[d],2),v=h[0],b=h[1];if(o=v,(l-=n(b))<=0)return o}if(!o)throw new Error("charStatsMatrix should not be empty.");return o}(t,e/.95)}var h=function(t,e,r){return void 0===e?t:Math.pow(2,-1/r)*(e-t)+t};function v(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=d(t);return++o.count,o.targets.push(Object(s.a)(Object(s.a)({},e),{},{index:o.count})),o.charStatsMatrix[e.value].lastCalledIndex=o.count,o.targets.length>7?o.targets=o.targets.slice(1):r||++o.position,o.wantsNewTarget=!1,o}function b(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=d(t);return r.head=t.backstoreCharacters[0],r.head?(r.wantsNewTarget=!1,r.backstoreCharacters.shift(),r.sinceNewHeadCount=0,r.headGoodCount=0,r.charStatsMatrix[r.head]={errorRatio:1,lastCalledIndex:void 0},v(r,{value:r.head,firstTime:!0},e)):(r.completed=!0,r)}function g(t,e){switch(e.type){case"PRESS":var r=d(t);return function(t,e){var r=e.key,o=e.timeStamp,a=t.targets[t.position];if(!a)throw new Error("target must not be empty when key pressed");var c=t.correct;if(t.correct=a.value===r,c)if(t.correct){if(t.succRatio=h(1,t.succRatio,10),t.charStatsMatrix[a.value].errorRatio=h(0,t.charStatsMatrix[a.value].errorRatio,4),t.lastPressTime){var n=o-t.lastPressTime;n<1e4&&(t.delayMean=h(n,t.delayMean,10))}a.value===t.head&&++t.headGoodCount}else t.succRatio=h(0,t.succRatio,10),t.charStatsMatrix[a.value].errorRatio=h(1,t.charStatsMatrix[a.value].errorRatio,12);t.lastPressTime=o}(r,e),t.correct&&r.correct&&t.succRatio>.98&&r.headGoodCount>=4?b(r):(r.correct&&(r.wantsNewTarget=!0),r);case"NEW_RANDOM_TARGET":return v(t,{value:u(t,e.seed),firstTime:!1})}}var f=r(2),p=r(16),m=r(36),x=r(1),O=Object({NODE_ENV:"production",PUBLIC_URL:"/keytrainer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CHARACTERS||"asdfghjkl;qwertyuiopzxcvbnm";function j(t){for(var e=t.amount,r=[],o=0;o<e;++o)r.push(Object(x.b)("div",{css:{width:"50px"}},o));return Object(x.b)(x.a,{children:r})}function w(t){var e=t.state,r=Object(f.c)(),o=e.delayMean&&6e4/e.delayMean;return Object(x.b)("div",{css:{display:"flex",justifyContent:"flex-end"},children:Object(x.c)("table",{css:{fontSize:"16px",color:r.colors.muted},children:[Object(x.c)("tr",{children:[Object(x.b)("td",{css:{textAlign:"right"},children:"accuracy"}),Object(x.b)("td",{css:{fontWeight:"normal",width:"30px",color:e.succRatio>.98?r.colors.good:r.colors.text,textAlign:"center"},children:Math.round(100*e.succRatio)}),Object(x.b)("td",{css:{textAlign:"left"},children:"%"})]}),Object(x.c)("tr",{children:[Object(x.b)("td",{css:{textAlign:"right"},children:"speed"}),Object(x.b)("td",{css:{color:r.colors.text,textAlign:"center"},children:e.targets[e.position].index>5&&o?Math.round(o):"\u2013"}),Object(x.b)("td",{css:{textAlign:"left"},children:"char / min"})]})]})})}function y(t){var e=t.state,r=Object(f.c)(),o=e.targets[e.position];return Object(x.c)("div",{css:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"200px"},children:[Object(x.c)("div",{css:{display:"flex",borderBottomStyle:"solid",borderWidth:"1px",paddingBottom:"10px",borderColor:r.colors.muted},children:[Object(x.b)(j,{amount:7-e.targets.length}),e.targets.map((function(t){var a=void 0;return t.index===(null===o||void 0===o?void 0:o.index)&&(a=r.colors.focus,e.correct||(a=r.colors.error)),t.firstTime&&(a=r.colors.new),t.index<(null===o||void 0===o?void 0:o.index)&&(a=r.colors.muted,t.firstTime&&(a=r.colors.mutedNew)),Object(x.b)(m.a,{classNames:"character",timeout:0,children:Object(x.b)("div",{css:{color:a,width:"40px",textAlign:"center",fontSize:"50px"},children:t.value})},t.index)}))]}),Object(x.b)("div",{css:{display:"flex",paddingTop:"10px",fontSize:"20px"},children:O.split("").map((function(t){return Object(x.b)(m.a,{in:t in e.charStatsMatrix,timeout:300,classNames:"node",children:Object(x.c)("div",{css:{color:r.colors.muted,"& div":{color:t in e.charStatsMatrix?r.colors.good:r.colors.muted},"&.node-enter":{"& div":{transform:"scale(5)",opacity:0,color:r.colors.new}},"&.node-enter-active":{transition:"all 300ms ease-in","& div":{transform:"scale(1)",opacity:1,color:r.colors.good,transition:"all 300ms ease-in"}}},children:[Object(x.b)("div",{css:{position:"absolute"},children:t}),t]})},t)}))})]})}function C(){var t=Object(f.c)(),e=function(t){var e={targets:[],succRatio:1,delayMean:void 0,position:0,correct:!0,sinceNewHeadCount:0,headGoodCount:0,backstoreCharacters:t.split(""),completed:!1,head:"",charStatsMatrix:{},count:0,wantsNewTarget:!1};for(e=b(e,!0);e.targets.length<4;)e=v(e,{value:u(e,Math.random()),firstTime:!1},!0);var r=Object(o.useReducer)(g,e),a=Object(i.a)(r,2),c=a[0],n=a[1];return Object(o.useEffect)((function(){c.wantsNewTarget&&n({type:"NEW_RANDOM_TARGET",seed:Math.random()})}),[n,c.wantsNewTarget]),[c,function(t,e){1===t.length&&n(function(t,e){return{type:"PRESS",key:t,timeStamp:e}}(t,e))}]}(O),r=Object(i.a)(e,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){var t=function(t){var e=t.key,r=t.timeStamp;c(e,r)};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[c]),Object(x.c)(x.a,{children:[Object(x.b)(p.a,{styles:{html:{height:"100%"},"#root":{height:"100%"},body:{margin:"20px",fontFamily:"Cantarell",padding:"10px",backgroundColor:t.colors.background,backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='28' height='49' viewBox='0 0 28 49'%3E%3Cg fill-rule='evenodd'%3E%3Cg id='hexagons' fill='%239C92AC' fill-opacity='0.2' fill-rule='nonzero'%3E%3Cpath d='M13.99 9.25l13 7.5v15l-13 7.5L1 31.75v-15l12.99-7.5zM3 17.9v12.7l10.99 6.34 11-6.35V17.9l-11-6.34L3 17.9zM0 15l12.98-7.5V0h-2v6.35L0 12.69v2.3zm0 18.5L12.98 41v8h-2v-6.85L0 35.81v-2.3zM15 0v7.5L27.99 15H28v-2.31h-.01L17 6.35V0h-2zm0 49v-8l12.99-7.5H28v2.31h-.01L17 42.15V49h-2z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}}}),Object(x.c)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"space-around"},children:[Object(x.b)(w,{state:a}),Object(x.b)(y,{state:a})]})]})}var S={colors:{background:"hsl(0, 0%, 94%)",muted:"hsl(212, 14%, 57%)",text:"hsl(0, 0%, 0%)",error:"hsl(352, 100%, 40%)",focus:"hsl(202, 100%, 42%)",new:"hsl(46, 100%, 48%)",mutedNew:"hsl(46, 50%, 70%)",good:"hsl(129, 100%, 30%)"}},M=r(4);n.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(f.d,{theme:S,children:Object(M.jsx)(C,{})})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.b332d74f.chunk.js.map